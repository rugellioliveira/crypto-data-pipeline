name: CI Pipeline

on:
push:
branches:
- main
- develop
pull_request:
branches:
- main
- develop

jobs:
test:
runs-on: ubuntu-latest

```
services:
  postgres:
    image: postgres:15
    env:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: crypto
    ports:
      - 5432:5432
    options: --health-cmd="pg_isready -U user" --health-interval=10s --health-timeout=5s --health-retries=5

steps:
  - name: Checkout repository
    uses: actions/checkout@v4

  - name: Setup Python
    uses: actions/setup-python@v5
    with:
      python-version: "3.11"

  - name: Install dependencies
    run: pip install -r requirements.txt

  - name: Wait for database
    run: sleep 10

  - name: Run tests
    run: pytest
```
